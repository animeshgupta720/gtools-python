!
! Generated by gtools.
! 
!
hostname {{ router.hostname }}
!
! {% if router.interface_set.all %}
! {% for interface in router.interface_set.all %} {% for logical_interface in interface.logical_interface_set.all %}
! {% if logical_interface.physical_interface %}
interface {{ interface.name }} {% else %}
interface {{ interface.name }}.{{ logical_interface.name }} {% endif %} {% if logical_interface.description %}
 description "{{ logical_interface.description }}" {% endif %} {% if logical_interface.vlan %}
 encapsulation dot1Q {{ logical_interface.vlan }} {% endif %} {% if logical_interface.ldp %}
 mpls ip {% endif %} {% if logical_interface.inet_dhcp_client %}
 ip address dhcp {% elif logical_interface.ipv4_address_set.all %} {% for ipv4_address in logical_interface.ipv4_address_set.all %}
 ip address {{ ipv4_address.host }} {{ ipv4_address.subnet_mask }} {% empty %}{% endfor %} {% endif %} {% if logical_interface.inet6_dhcp_client %} 
 ipv6 address dhcp rapid commit
 ipv6 enable {% elif logical_interface.ipv6_address_set.all %} {% for ipv6_address in logical_interface.ipv6_address_set.all %}
 ipv6 address {{ ipv6_address }} {% empty %}{% endfor %} {% endif %} {% endfor %} {% endfor %} {% endif %}
!
!
! {% if router.ipv4_static_set.all %} {% for ipv4_static in router.ipv4_static_set.all %}
ip route {{ ipv4_static.network }} {{ ipv4_static.subnet_mask }} {{ ipv4_static.next_hop }} {% endfor %} {% endif %}
! {% if router.ipv6_static_set.all %} {% for ipv6_static in router.ipv6_static_set.all %}
ipv6 route {{ ipv6_static.network }}/{{ ipv6_static.cidr }} {{ ipv6_static.next_hop }} {% endfor %} {% endif %}
!
!
! 
router bgp {{ router.local_aut_num.asn }}
 bgp router-id {{ router.routing_id }} 
 neighbor ibgp peer-group
 neighbor ibgp remote-as 4242420031
 neighbor ibgp update-source {{ router.routing_id }}
 neighbor ibgp next-hop-self
 neighbor ibgp soft-reconfiguration inbound
{% for router in router_list %} neighbor {{ router.routing_id }} peer-group ibgp
{% endfor %}{% for neighbor in router.neighbor_set.all %} neighbor {{ neighbor.peer_ip }} remote-as {{ neighbor.aut_num.asn }}
 neighbor {{ neighbor.peer_ip }} soft-reconfiguration inbound
 neighbor {{ neighbor.peer_ip }} prefix-list bogon in
 neighbor {{ neighbor.peer_ip }} prefix-list bogon out
{% endfor %}!
!
!
! Basic martian prefix list.
!
ip prefix-list bogon seq 10 deny 0.0.0.0/8
ip prefix-list bogon seq 15 deny 10.0.0.0/8
ip prefix-list bogon seq 20 deny 100.64.0.0/10
ip prefix-list bogon seq 25 deny 127.0.0.0/8
ip prefix-list bogon seq 30 deny 169.254.0.0/16
ip prefix-list bogon seq 35 deny 172.16.0.0/12
ip prefix-list bogon seq 40 deny 192.0.0.0/24
ip prefix-list bogon seq 45 deny 192.0.2.0/24
ip prefix-list bogon seq 50 deny 198.18.0.0/15
ip prefix-list bogon seq 55 deny 198.51.100.0/24
ip prefix-list bogon seq 60 deny 203.0.113.0/24
ip prefix-list bogon seq 65 deny 224.0.0.0/3
