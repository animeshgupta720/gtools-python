stages:
  - test
  
test:
  image: python:2.7-stretch
  stage: test
  before_script:
    - pip install -r requirements.txt
    - python manage.py makemigrations
    - python manage.py migrate
  when: on_success
  script:
    - python manage.py test -k
    
services:
  - mysql:latest

variables:
  MYSQL_DATABASE: gtools
  MYSQL_ROOT_PASSWORD: test_user_password
  MYSQL_USER: gtools
  MYSQL_PASSWORD: OOsX7qu6Scp1EHcxvMy7JLxw